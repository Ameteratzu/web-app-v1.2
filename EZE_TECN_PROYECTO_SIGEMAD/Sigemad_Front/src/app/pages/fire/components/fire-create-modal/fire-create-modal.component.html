<div style="padding: 20px 60px 60px">
  <p-toast />
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="inter title-modal">Crear incendio</div>
      </div>
      <div class="col-12">
        <div *ngIf="error" class="text-center alert alert-danger mt-3">
          Ha ocurrido un error inténtelo nuevamente
        </div>
      </div>

      <form
        (ngSubmit)="onSubmit()"
        [formGroup]="formData"
        class="mt-5"
        [class]="classValidate()"
      >
        <div *ngIf="!showInputForeign">
          <div class="row">
            <div class="col-6">
              <div class="form-floating">
                <select
                  class="form-select"
                  id="floatingSelect"
                  aria-label="Floating label select example"
                  (change)="onChange($event)"
                  formControlName="territory"
                  required
                >
                  <option
                    *ngFor="let territory of territories()"
                    value="{{ territory.id }}"
                  >
                    {{ territory.descripcion }}
                  </option>
                </select>
                <label for="floatingSelect">Territorio</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>
            <div class="col-6">
              <div class="form-floating">
                <select
                  class="form-select"
                  id="floatingSelect"
                  aria-label="Floating label select example"
                  formControlName="event"
                  required
                >
                  <option selected value="">Seleccione una opción</option>
                  <option *ngFor="let event of events()" value="{{ event.id }}">
                    {{ event.descripcion }}
                  </option>
                </select>
                <label for="floatingSelect">Clase de suceso</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-6">
              <div class="form-floating">
                <select
                  class="form-select"
                  id="floatingSelect"
                  aria-label="Floating label select example"
                  (change)="loadMunicipalities($event)"
                  formControlName="province"
                  required
                >
                  <option selected value="">Seleccione una opción</option>
                  <option
                    *ngFor="let province of provinces()"
                    value="{{ province.id }}"
                  >
                    {{ province.descripcion }}
                  </option>
                </select>
                <label for="floatingSelect">Provincia</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>

            <div class="col-5">
              <div class="form-floating">
                <select
                  class="form-select"
                  id="floatingSelect"
                  aria-label="Floating label select example"
                  (change)="setMunicipalityId($event)"
                  formControlName="municipality"
                  required
                >
                  <option selected value="">Seleccione una opción</option>
                  <option
                    *ngFor="let municipality of municipalities()"
                    value="{{ municipality.id }}"
                  >
                    {{ municipality.descripcion }}
                  </option>
                </select>
                <label for="floatingSelect">Municipio</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>

            <div class="col-1">
              <div class="d-flex justify-content-center align-items-center">
                <img
                  (click)="openModalMapCreate()"
                  style="cursor: pointer"
                  src="/assets/img/location-btn.svg"
                  alt="location-btn"
                  width="30"
                />
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-6">
              <div class="form-floating mb-3">
                <input
                  type="text"
                  formControlName="denomination"
                  class="form-control"
                  id="floatingInput"
                  required
                />
                <label for="floatingInput">Denominación</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>
            <div class="col-6">
              <div class="form-floating mb-3">
                <input
                  type="date"
                  formControlName="startDate"
                  class="form-control"
                  id="floatingInput"
                  required
                />
                <label for="floatingInput">Fecha Inicio</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-12">
              <div class="form-floating">
                <textarea
                  class="form-control"
                  placeholder="Leave a comment here"
                  id="floatingTextarea2"
                  style="height: 100px"
                  formControlName="generalNote"
                  rows="4"
                  cols="87"
                ></textarea>
                <label for="floatingTextarea2">Nota general</label>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="showInputForeign">
          <div class="row">
            <div class="col-6">
              <div class="form-floating">
                <select
                  class="form-select"
                  id="floatingSelect"
                  aria-label="Floating label select example"
                  (change)="onChange($event)"
                  formControlName="territory"
                  required
                >
                  <option selected value="">Seleccione una opción</option>
                  <option
                    *ngFor="let territory of territories()"
                    value="{{ territory.id }}"
                  >
                    {{ territory.descripcion }}
                  </option>
                </select>
                <label for="floatingSelect">Territorio</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>
            <div class="col-6">
              <div class="form-floating">
                <select
                  class="form-select"
                  id="floatingSelect"
                  aria-label="Floating label select example"
                  formControlName="event"
                  required
                >
                  <option selected value="">Seleccione una opción</option>
                  <option *ngFor="let event of events()" value="{{ event.id }}">
                    {{ event.descripcion }}
                  </option>
                </select>
                <label for="floatingSelect">Clase de suceso</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-6">
              <div class="form-floating">
                <select
                  class="form-select"
                  id="floatingSelect"
                  aria-label="Floating label select example"
                  formControlName="country"
                  required
                >
                  <option selected value="">Seleccione una opción</option>
                  <option
                    *ngFor="let country of countries()"
                    value="{{ country.id }}"
                  >
                    {{ country.descripcion }}
                  </option>
                </select>
                <label for="floatingSelect">País</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>

            <div class="col-5">
              <div class="form-floating mb-3">
                <input
                  type="text"
                  formControlName="ubication"
                  class="form-control"
                  id="floatingInput"
                  required
                />
                <label for="floatingInput">Ubicación</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>

            <div class="col-1">
              <div class="d-flex justify-content-center align-items-center">
                <img
                  (click)="openModalMapCreate()"
                  style="cursor: pointer"
                  src="/assets/img/location-btn.svg"
                  alt="location-btn"
                  width="30"
                />
              </div>
            </div>
          </div>

          <div class="row mt-3 align-items-center justify-content-center">
            <div class="col-6">
              <div class="form-floating mb-3">
                <input
                  type="date"
                  formControlName="startDate"
                  class="form-control"
                  id="floatingInput"
                  required
                />
                <label for="floatingInput">Fecha Inicio</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>
            <div class="col-6 align-items-center justify-content-center">
              <div class="form-check mb-3">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value=""
                  id="flexCheckDefault"
                  formControlName="limitSpain"
                />
                <label class="form-check-label" for="flexCheckDefault">
                  Limítrofe con España
                </label>
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-6">
              <div class="form-floating">
                <select
                  class="form-select"
                  id="floatingSelect"
                  aria-label="Floating label select example"
                  (change)="loadMunicipalities($event)"
                  formControlName="province"
                  required
                >
                  <option selected value="">Seleccione una opción</option>
                  <option
                    *ngFor="let province of provinces()"
                    value="{{ province.id }}"
                  >
                    {{ province.descripcion }}
                  </option>
                </select>
                <label for="floatingSelect">Provincia</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>

            <div class="col-6">
              <div class="form-floating">
                <select
                  class="form-select"
                  id="floatingSelect"
                  aria-label="Floating label select example"
                  (change)="setMunicipalityId($event)"
                  formControlName="municipality"
                  required
                >
                  <option selected value="">Seleccione una opción</option>
                  <option
                    *ngFor="let municipality of municipalities()"
                    value="{{ municipality.id }}"
                  >
                    {{ municipality.descripcion }}
                  </option>
                </select>
                <label for="floatingSelect">Municipio</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>
          </div>

          <div class="row mt-3">
            <div class="col-12">
              <div class="form-floating mb-3">
                <input
                  type="text"
                  formControlName="denomination"
                  class="form-control"
                  id="floatingInput"
                  required
                />
                <label for="floatingInput">Denominación</label>
                <div class="invalid-feedback">Este campo es requerido</div>
              </div>
            </div>

            <div class="col-12">
              <div class="form-floating">
                <textarea
                  class="form-control"
                  placeholder="Leave a comment here"
                  id="floatingTextarea2"
                  style="height: 100px"
                  formControlName="generalNote"
                  rows="4"
                  cols="87"
                ></textarea>
                <label for="floatingTextarea2">Nota general</label>
              </div>
            </div>
          </div>
        </div>
        <div class="d-flex-end">
          <div class="mt-40 mb-30 text-right">
            <button type="submit" class="btn btn-primary">
              <img src="/assets/img/check.svg" alt="check" />
            </button>

            <button
              type="button"
              (click)="closeModal()"
              class="btn btn-secondary"
              style="background-color: white; margin-left: 10px"
            >
              <img src="/assets/img/close.svg" alt="close" />
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
