<div class="d-flex border-bottom">
	<div class="w-50">
		<h1 class="text-info font-weight-bold font-size-48 calibri">
			Sistema de gestión de emergencia <br>
			y apoyo a la decisión
		</h1>
	</div>

	<div class="w-50 text-right">
		<h1 class="text-blue font-weight-bold inter mt-20">Incendios forestales</h1>

		<h2 class="text-green font-weight-bold inter">Búsqueda de sucesos</h2>
	</div>
</div>

<form (ngSubmit)="onSubmit()" [formGroup]="formData">
	<input type="hidden" formControlName="id" value="{{ fire.id }}">
	<input type="hidden" formControlName="territory" value="{{ fire.idTerritorio }}">

	<div class="d-flex pt-15 gap-50">
		<div class="d-flex">
			<div class="pt-12 pe-15 inter font-weight-bold font-size-16">
				Denominación
			</div>

			<div>
				<input formControlName="name" value="{{ fire.denominacion }}" class="form-control" type="text" placeholder="Santa María de Guía de Gran Canaría">
			</div>
		</div>

		<div class="d-flex">
			<div class="pt-12 pe-15 inter font-weight-bold font-size-16">
				Provincia
			</div>

			<div>
				<select formControlName="province" class="form-control" (change)="loadMunicipalities($event)">
					<option value=""></option>
					<option [selected]="province.id == fire.idProvincia" value="{{ province.id }}" *ngFor="let province of provinces()">
						{{ province.descripcion }}
					</option>
				</select>
			</div>
		</div>

		<div class="d-flex">
			<div class="pt-12 font-size-16 pe-15 inter font-weight-bold">
				Municipio
			</div>

			<div>
				<select formControlName="municipality" class="form-control">
					<option value=""></option>
					<option [selected]="municipality.id == fire.idMunicipio" value="{{ municipality.id }}" *ngFor="let municipality of municipalities()">
						{{ municipality.descripcion }}
					</option>
				</select>
			</div>

			<div class="ms-10">
				<img (click)="openModalMapEdit()" style="cursor: pointer;" src="/assets/img/location-btn.svg" alt="location-btn">
			</div>
		</div>

		<div class="d-flex">
			<div class="pt-12 font-size-16 pe-15 inter font-weight-bold">
				Inicio
			</div>

			<div>
				<input class="form-control" formControlName="start" type="datetime-local" value="{{ fire.fechaInicio }}">
			</div>		
		</div>
	</div>

	<div class="d-flex pt-15 gap-50">
		<div class="d-flex">
			<div class="pt-12 font-size-16 pe-15 inter font-weight-bold">
				Tipo de suceso
			</div>

			<div>
				<select formControlName="event" class="form-control">
					<option value=""></option>
					<option [selected]="event.id == fire.idSuceso" value="{{ event.id }}" *ngFor="let event of events()">
						{{ event.descripcion }}
					</option>
				</select>
			</div>
		</div>

		<div class="d-flex">
			<div class="pt-12 font-size-16 pe-15 inter font-weight-bold">
				Nota general
			</div>

			<div class="d-flex">
				<textarea formControlName="note" class="form-control" rows="1" cols="134">{{ fire.comentarios }}</textarea>

				<button class="btn-white">
					<img src="/assets/img/arrow-expand.svg" alt="arrow-expand">
				</button>
			</div>
		</div>
	</div>

	<div class="border-bottom text-right me-20 pt-15 pb-15 d-flex justify-content-between">
		<div class="d-flex">
			<div class="pt-12 font-size-16 pe-15 inter font-weight-bold">
				Estado
			</div>

			<div>
				<select formControlName="event" class="form-control">
					<option value=""></option>
					<option [selected]="event.id == fire.idSuceso" value="{{ event.id }}" *ngFor="let event of events()">
						{{ event.descripcion }}
					</option>
				</select>
			</div>
		</div>

		<div class="text-right">
			<button type="submit" class="btn-blue">
				<img class="w-30 h-30" src="/assets/img/check.svg" alt="check">
			</button>

			<button type="button" class="btn-white">
				<img class="w-30 h-30" src="/assets/img/list-btn.svg" alt="list-btn">
			</button>

			<button (click)="confirmDelete()" type="button" class="btn-white">
				<img class="w-30 h-30" src="/assets/img/close.svg" alt="close">
			</button>

			<button type="button" class="btn-white">
				<img class="w-30 h-30" src="/assets/img/refresh.svg" alt="refresh">
			</button>

			<button type="button" class="btn-white">
				<img class="w-30 h-30" src="/assets/img/back.svg" alt="back">
			</button>			
		</div>
	</div>
</form>

<div class="me-20 mt-5">
	<img class="w-100" src="/assets/img/graph.svg" alt="graph">
</div>

<hr class="me-20">

<div class="d-flex">
	<div class="border p-5 mr-13 w-50">
		<div>
			<span class="font-size-20 text-blue font-weight-bold">Datos consolidados</span> (Act: 19/08/2024 19:45)
		</div>

		<div class="mt-24">
			<span class="font-weight-bold">Inicio de incendio</span> 12/08/2024 00:00
		</div>

		<div>
			<span class="font-weight-bold">Estado</span> Activo
		</div>

		<div>
			<span class="font-weight-bold">Nivel de gravedad</span> Activo
		</div>

		<div>
			<span class="font-weight-bold">Hechos relevantes</span>
		</div>

		<div>Activado plan nacional XX (18/08/2024 10:00)</div>
		<div>Activado Coppernico (18/08/2024 12:00)</div>
		<div>CECOPI (19/08/2024 18:15)</div>

		<div>
			<span class="font-weight-bold">Consecuencias</span>
		</div>

		<div>Heridos: 2</div>
		<div>Evacuados: 134 (Santa María - 18/08/2024 19:45)</div>
		<div>Area afectada: Santa María de Guía de Gran Canaria</div>
		<div>Viabilidad: Corte CN-21 PK 2,300-3,100</div>
	</div>

	<div class="border p-5 w-70">
		<div>
			<span class="font-size-20 text-blue font-weight-bold">Registro de actualizaciones</span> (Cantidad: 10 - Orden Fecha y hora desc.)
		</div>

		<table class="w-100">
			<thead>
				<tr>
					<th>No.</th>
					<th>Fecha y hora</th>
					<th>Registro</th>
					<th>Origen</th>
					<th>Tipo de registro</th>
					<th>Técnico</th>
					<th></th>
				</tr>
			</thead>

			<tbody>
				<tr *ngFor="let item of items">
					<td>{{ item.id }}</td>
					<td>{{ item.datetime }}</td>
					<td>{{ item.record }}</td>
					<td>{{ item.origin }}</td>
					<td>{{ item.record_type }}</td>
					<td>{{ item.technical }}</td>

					<td>
						<img src="/assets/img/close.svg" alt="close">
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>